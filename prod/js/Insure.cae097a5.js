(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Insure"],{"1afd":function(t,e,s){},"25f0":function(t,e,s){"use strict";var a=s("6eeb"),r=s("825a"),i=s("d039"),o=s("ad6d"),n="toString",c=RegExp.prototype,d=c[n],l=i((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),u=d.name!=n;(l||u)&&a(RegExp.prototype,n,(function(){var t=r(this),e=String(t.source),s=t.flags,a=String(void 0===s&&t instanceof RegExp&&!("flags"in c)?o.call(t):s);return"/"+e+"/"+a}),{unsafe:!0})},"3f7a":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dialog"},[s("el-dialog",{attrs:{center:"",top:"0","custom-class":"custom-dialog","destroy-on-close":"","show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,visible:t.dialogVisible,width:t.width},on:{"update:visible":function(e){t.dialogVisible=e}}},[t._t("body"),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t._t("footer")],2)],2)],1)},r=[],i=s("5530"),o=s("2f62"),n={props:{width:{type:String,default:"400px"}},computed:Object(i["a"])({},Object(o["d"])(["dialogVisible"]))},c=n,d=(s("cdce"),s("2877")),l=Object(d["a"])(c,a,r,!1,null,null,null);e["a"]=l.exports},9012:function(t,e,s){},b4e89:function(t,e,s){t.exports=s.p+"img/logo1@2x.3091a9bf.png"},bab8:function(t,e,s){"use strict";var a=s("9012"),r=s.n(a);r.a},be49:function(t,e,s){t.exports=s.p+"img/logo4@2x.c4fc0cf9.png"},cdce:function(t,e,s){"use strict";var a=s("1afd"),r=s.n(a);r.a},d787:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pages-wrapper insure"},[a("div",{staticClass:"card-wrapper"},[a("el-card",{staticClass:"box-card left-card"},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("Details")])]),a("div",{staticClass:"description mb-20"},[a("p",[t._v("Choose a smart contract to cover")])]),a("div",{staticClass:"icon-wrapper"},[a("ul",{staticClass:"icon-list-wrapper"},[t._l(t.productList,(function(e,s){return a("li",{key:s},[a("div",{staticClass:"img-box",class:{active:t.activeIndex===s},on:{click:function(a){return t.getProductItem(e,s)}}},[a("img",{attrs:{src:e.logo,alt:""}})])])})),a("li",[a("div",{staticClass:"img-box disabled"},[a("img",{attrs:{src:s("b4e89"),alt:""}})])]),a("li",[a("div",{staticClass:"img-box disabled"},[a("img",{attrs:{src:s("e888"),alt:""}})])]),a("li",[a("div",{staticClass:"img-box disabled"},[a("img",{attrs:{src:s("be49"),alt:""}})])])],2)])]),a("el-card",{staticClass:"box-card right-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span")]),a("div",{staticClass:"input-wrapper"},[a("el-card",{staticClass:"box-card min-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("Smart Contract address")])]),a("div",{staticClass:"input-content max"},[t.productAddr?a("div",{staticClass:"addr"},[t._v(t._s(t.productAddr))]):t._e()])])],1)])],1),a("div",{staticClass:"card-wrapper"},[a("el-card",{staticClass:"box-card left-card"},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("Cover Amount")])]),a("div",{staticClass:"description height-80"},[a("p",[t._v("The amount you will receive in the event of a valid claim as a fixed-sum payout.")])]),a("div",{staticClass:"input-wrapper"},[a("el-card",{staticClass:"box-card min-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("Amount")])]),a("div",{staticClass:"input-content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"number",placeholder:"0"},domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),a("span",[t._v("ETH")])])])],1)]),a("el-card",{staticClass:"box-card right-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("Cover period")])]),a("div",{staticClass:"description height-80"},[a("p",[t._v("Enter the length of time you want to be covered for. Cover is live immediately from the purchase transaction confirmation.")])]),a("div",{staticClass:"input-wrapper"},[a("el-card",{staticClass:"box-card min-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("Period")])]),a("div",{staticClass:"input-content"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.days,expression:"days"}],attrs:{type:"number",placeholder:"0"},domProps:{value:t.days},on:{input:function(e){e.target.composing||(t.days=e.target.value)}}}),a("span",[t._v("DAYS")])])])],1)])],1),a("div",{staticClass:"confirm-wrapper"},[a("button",{staticClass:"button",on:{click:t.showDiaglog}},[t._v("confirm")])]),a("div",{staticClass:"history-active"},[a("span",{class:{active:t.active},on:{click:function(e){return t.historyActive(1)}}},[t._v("Transaction Record")]),a("span",{class:{active:!t.active},on:{click:function(e){return t.historyActive(0)}}},[t._v("My transaction")])]),a("div",{staticClass:"history-wrapper"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"card-header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("History")])]),t.active?a("div",{staticClass:"histpry-table"},[a("table",[a("tr",[a("th",[t._v("Product Name")]),a("th",[t._v("Cover Amount")]),a("th",[t._v("Cover Period")]),a("th",[t._v("Address")]),a("th",[t._v("Time")])]),t._l(t.historyList,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.product_info.product_name))]),a("td",[t._v(t._s(e.premium))]),a("td",[t._v(t._s(e.blocks))]),a("td",[t._v(t._s(e.buyer))]),a("td",[t._v(t._s(e.create_time))])])}))],2),0===t.historyList.length?a("div",{staticClass:"no-data"},[t._v("No Data")]):t._e()]):a("div",{staticClass:"histpry-table"},[a("table",[a("tr",[a("th",[t._v("Product Name")]),a("th",[t._v("Cover Amount")]),a("th",[t._v("Cover Period")]),a("th",[t._v("Address")]),a("th",[t._v("Time")])]),t._l(t.orderList,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.product_info.product_name))]),a("td",[t._v(t._s(e.premium))]),a("td",[t._v(t._s(e.blocks))]),a("td",[t._v(t._s(e.buyer))]),a("td",[t._v(t._s(e.create_time))])])}))],2),0===t.historyList.orderList?a("div",{staticClass:"no-data"},[t._v("No Data")]):t._e()])])],1),a("Dialog",{attrs:{width:"546px"}},[a("div",{staticClass:"custom-dialog-body",attrs:{slot:"body"},slot:"body"},[a("ul",{staticClass:"confirm-dialog-wrapper"},[a("li",[a("div",{staticClass:"confirm-list-item"},[a("div",{staticClass:"title"},[t._v("Cost of Cover")]),a("div",{staticClass:"content"},[a("div",{staticClass:"content-item color-02D396"},[t._v(t._s(t.cost))]),a("div",{staticClass:"content-item"},[t._v("ETH")])])])]),a("li",[a("div",{staticClass:"confirm-list-item"},[a("div",{staticClass:"title"},[t._v("Smart Contract Address")]),a("div",{staticClass:"content"},[a("div",{staticClass:"content-item font-16"},[t._v(t._s(t.productAddr))])])])]),a("li",[a("div",{staticClass:"confirm-list-item"},[a("div",{staticClass:"title"},[t._v("Fixed Payout")]),a("div",{staticClass:"content"},[a("div",{staticClass:"content-item"},[t._v(t._s(t.amount))]),a("div",{staticClass:"content-item fixed-payout"},[a("span",[t._v("ETH")]),a("span",{staticClass:"min"},[t._v("Paid in ETH｜Current Value（$394.11）")])])])])]),a("li",[a("div",{staticClass:"confirm-list-item"},[a("div",{staticClass:"title"},[t._v("Cover Period")]),a("div",{staticClass:"content"},[a("div",{staticClass:"content-item"},[t._v(t._s(t.days))]),a("div",{staticClass:"content-item"},[t._v("DAYS")])])])])])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("button",{staticClass:"button close",on:{click:function(e){return t.UPDATE_DIALOG_VISBLE(!1)}}},[t._v("Close")]),a("button",{staticClass:"button confirm-button",on:{click:t.sumbit}},[t._v("confirm")])])])],1)},r=[],i=(s("4160"),s("d81d"),s("a9e3"),s("d3b7"),s("25f0"),s("159b"),s("96cf"),s("1da1")),o=s("5530"),n=s("3f7a"),c=s("2f62"),d={data:function(){return{productList:[],daysBlocks:5760,activeIndex:-1,productAddr:"",days:"",amount:"",feeRate:0,page:1,total:0,active:1,historyList:[],orderListPage:1,orderListTotal:0,orderList:[]}},components:{Dialog:n["a"]},computed:Object(o["a"])(Object(o["a"])({},Object(c["d"])(["web3","account"])),{},{blocks:function(){return Number(this.$math.format(this.$math.multiply(this.daysBlocks,Number(this.days)),{precision:16,notation:"fixed"}))},cost:function(){return Number(this.$math.format(this.$math.multiply(this.feeRate,this.blocks,Number(this.amount)),{precision:16,notation:"fixed"}))}}),mounted:function(){this.getProducts()},methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(c["c"])(["UPDATE_DIALOG_VISBLE"])),Object(c["b"])(["buyInsurance","getProduct","getProductList","getProviderList","insuranceOrders"])),{},{showDiaglog:function(){-1!==this.activeIndex&&""!=this.productAddr?""!=this.amount?Number(this.amount)<Math.pow(10,-6)?this.$message.error("Amount must more than 10e-6"):""!=this.days?0!==this.cost?this.UPDATE_DIALOG_VISBLE(!0):this.$message.error("Cost of Cover 0"):this.$message.error("Enter Days"):this.$message.error("Enter Amount"):this.$message.error("Please select products first")},sumbit:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,a,r,i,n,c,d,l,u,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=Number(t.amount),a={productAddr:t.productAddr,amount:t.web3.utils.toWei(t.amount),blocks:t.blocks},e.prev=2,e.next=5,t.getProviderList({page:1});case 5:if(r=e.sent,console.log({res:r}),console.log(t.cost),i=r.data,n=t.sortKey(i,"update_time"),0!==n.length){e.next=13;break}return t.$message.error("Not enough"),e.abrupt("return");case 13:if(c=0,n.forEach((function(t,e){e<3&&(c+=t.total_amount)})),!(c<s)){e.next=18;break}return t.$message.error("Not enough"),e.abrupt("return");case 18:return d=[],l=[],u=s,n.forEach((function(e,s){s<3&&u>0&&(console.log(u<=e.total_amount),u<=e.total_amount?(d.push(e.address),l.push(t.web3.utils.toWei(u.toString())),u-=e.total_amount):(d.push(e.address),l.push(t.web3.utils.toWei(e.total_amount.toString())),u-=e.total_amount))})),a=Object(o["a"])(Object(o["a"])({},a),{},{ipAddrs:d,ipAmount:l,cost:t.web3.utils.toWei(t.cost.toString())}),t.UPDATE_DIALOG_VISBLE(!1),e.next=26,t.buyInsurance(a);case 26:v=e.sent,console.log(v),e.next=33;break;case 30:throw e.prev=30,e.t0=e["catch"](2),Error(e.t0);case 33:case"end":return e.stop()}}),e,null,[[2,30]])})))()},close:function(){this.activeIndex=-1,this.productAddr="",this.days="",this.amount="",this.feeRate=0},sortKey:function(t,e){return t.sort((function(t,s){var a=t[e],r=s[e];return a>r?-1:a<r?1:0}))},getProductItem:function(t,e){var s=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s.activeIndex=e,r=t.address,s.productAddr=r,s.getRecords(),a.prev=4,a.next=7,s.getProduct(r);case 7:i=a.sent,s.feeRate=s.$math.multiply(Number(i[1]),Math.pow(10,-18)),console.log(i),a.next=15;break;case 12:throw a.prev=12,a.t0=a["catch"](4),Error(a.t0);case 15:case"end":return a.stop()}}),a,null,[[4,12]])})))()},getProducts:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getProductList({page:1});case 3:s=e.sent,t.productList=s.data,e.next=10;break;case 7:throw e.prev=7,e.t0=e["catch"](0),Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},historyActive:function(t){this.active=t,t?this.getRecords():this.getOrderList()},getRecords:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$http.getOrderList({page:t.page});case 3:s=e.sent,a=[],s.data.map((function(t,e){e<10&&a.push(t)})),console.log(a),t.historyList=a,t.total=s.total,e.next=14;break;case 11:throw e.prev=11,e.t0=e["catch"](0),Error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},getOrderList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,s={keywords:t.account,page:t.orderListPage},e.next=4,t.$http.getOrderList(s);case 4:a=e.sent,r=[],a.data.map((function(t,e){e<10&&r.push(t)})),t.orderList=r,t.orderListTotal=a.total,console.log(r),e.next=15;break;case 12:throw e.prev=12,e.t0=e["catch"](0),Error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()}})},l=d,u=(s("bab8"),s("2877")),v=Object(u["a"])(l,a,r,!1,null,"dded0eca",null);e["default"]=v.exports},d81d:function(t,e,s){"use strict";var a=s("23e7"),r=s("b727").map,i=s("1dde"),o=s("ae40"),n=i("map"),c=o("map");a({target:"Array",proto:!0,forced:!n||!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},e888:function(t,e,s){t.exports=s.p+"img/logo2@2x.0e0962c6.png"}}]);
//# sourceMappingURL=Insure.cae097a5.js.map